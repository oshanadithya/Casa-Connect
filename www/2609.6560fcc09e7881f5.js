"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2609],{2609:(J,f,d)=>{d.r(f),d.d(f,{EventsPageModule:()=>P});var u=d(6814),b=d(95),g=d(2129),a=d(7311),m=d(5861),h=d(9862),e=d(6689),x=d(6882),y=d(8789),_=d(2014);function Z(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw();return e.KtG(r.remind(s.id))}),e._uU(1," Add Reminder "),e.qZA()}2&n&&e.Q6J("disabled",!1)}function T(n,c){if(1&n&&(e.TgZ(0,"ion-card",7)(1,"ion-card-header")(2,"ion-card-title",8),e._uU(3),e.qZA()(),e._UZ(4,"ion-card-content",9)(5,"img",10),e.TgZ(6,"ion-card-content")(7,"ion-label")(8,"p",11)(9,"b"),e._uU(10,"Venue:"),e.qZA()()(),e.TgZ(11,"ion-label")(12,"p",12),e._uU(13),e.qZA()(),e._UZ(14,"br"),e.TgZ(15,"ion-label")(16,"p",11)(17,"b"),e._uU(18,"Date & Time:"),e.qZA()()(),e.TgZ(19,"ion-label")(20,"p",12),e._uU(21),e.qZA()(),e.TgZ(22,"ion-label")(23,"p",12),e._uU(24),e.qZA()(),e._UZ(25,"br"),e.TgZ(26,"ion-button",13),e._uU(27," Reserve "),e.qZA(),e.YNc(28,Z,2,1,"ion-button",14),e.qZA()()),2&n){const t=c.$implicit;e.xp6(3),e.Oqu(t.event_name),e.xp6(1),e.Q6J("innerHTML",t.description,e.oJD),e.xp6(1),e.MGl("src","https://casa.evokemusic.net/storage/images/",t.image,"",e.LSH),e.xp6(8),e.Oqu(t.venue),e.xp6(8),e.Oqu(t.date),e.xp6(3),e.Oqu(t.start_time),e.xp6(2),e.Q6J("disabled",!0),e.xp6(2),e.Q6J("ngIf",0==t.status_in_calander)}}let v=(()=>{class n{constructor(t,i,s,r,p,l,o,E){this.auth=t,this.route=i,this.alertController=s,this.router=r,this._apiService=p,this.http=l,this.storage=o,this.loadingController=E,this.events=[],this.isModalOpen=!1,this.user_events=[],this.btnStatus=0,this.status_in_calander=1}showAlert(t,i){var s=this;return(0,m.Z)(function*(){yield(yield s.alertController.create({header:t,message:i,buttons:["Okay"]})).present()})()}ngOnInit(){var t=this;return(0,m.Z)(function*(){const i=yield t.loadingController.create();yield i.present(),t.user_id=yield t.storage.get("userid"),t.member=yield t.storage.get("userState"),t.useremail=yield t.storage.get("email"),t.google_email=yield t.storage.get("google_email"),t.apple_email=yield t.storage.get("apple_email"),t.appleid=yield t.storage.get("appleid"),t.gmailid=yield t.storage.get("gmailid"),t.sendPostRequest(),yield i.dismiss()})()}remind(t){var i=new Headers;i.append("Accept","application/json"),i.append("Content-Type","application/json");const s={headers:new h.WM({"Content-Type":"application/json"})},r=this._apiService.apiV2+"addreminder";if(this.google_email)this.http.post(r,JSON.stringify({user_id:this.gmailid,event_id:t}),s).subscribe({next:o=>{this.addReminder=o},error:o=>console.error(o),complete:()=>{this.showAlert("Reminder Added","Successfully!"),this.gotoReminders()}});else if(this.apple_email)this.http.post(r,JSON.stringify({user_id:this.appleid,event_id:t}),s).subscribe({next:o=>{this.addReminder=o},error:o=>console.error(o),complete:()=>{this.showAlert("Reminder Added","Successfully!"),this.gotoReminders()}});else{var p;const l={user_id:null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid,event_id:t};this.http.post(r,JSON.stringify(l),s).subscribe({next:o=>{this.addReminder=o},error:o=>console.error(o),complete:()=>{this.showAlert("Reminder Added","Successfully!"),this.gotoReminders()}})}}gotoReminders(){this.router.navigateByUrl("reminders")}sendPostRequest(){var t=this;return(0,m.Z)(function*(){var i=new Headers;i.append("Accept","application/json"),i.append("Content-Type","application/json");const s={headers:new h.WM({"Content-Type":"application/json"})},r="https://casa.evokemusic.net/api/v2/events/";if(t.google_email)t.http.get(`${r}${t.gmailid}`,s).subscribe({next:o=>{t.events=o},error:o=>console.error(o),complete:()=>console.log()});else if(t.apple_email)t.http.get(`${r}${t.appleid}`,s).subscribe({next:o=>{t.events=o},error:o=>console.error(o),complete:()=>console.log()});else{var p;const l=`${r}${null===(p=t.auth.currentUser)||void 0===p?void 0:p.uid}`;t.http.get(l,s).subscribe({next:o=>{t.events=o},error:o=>console.error(o),complete:()=>console.log()})}})()}doRefresh(t){setTimeout(()=>{this.sendPostRequest(),t.target.complete()},2e3)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.gx),e.Y36(g.gz),e.Y36(a.Br),e.Y36(g.F0),e.Y36(y.s),e.Y36(h.eN),e.Y36(_.K),e.Y36(a.HT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-events"]],decls:8,vars:2,consts:[["id","main-content",1,"ion-page"],[1,"ion-padding"],["slot","fixed","disabled","false",3,"ionRefresh"],["pullingIcon","arrow-dropdown","pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refreshing..."],["style","margin-top: 5%;",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],["size","small",2,"margin-left","auto","width","80px","height","30px","font-size","x-small",3,"disabled","click"],[2,"margin-top","5%"],[2,"font-size","x-large","text-align","center"],[2,"font-size","small","text-align","justify",3,"innerHTML"],[1,"img-card",3,"src"],[2,"font-size","x-small"],[2,"font-size","xx-small"],["size","small",2,"float","left","margin-bottom","10px",3,"disabled"],["size","small","style","float: right; margin-bottom: 10px;",3,"disabled","click",4,"ngIf"],["size","small",2,"float","right","margin-bottom","10px",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"ion-content",1)(2,"ion-refresher",2),e.NdJ("ionRefresh",function(r){return i.doRefresh(r)}),e._UZ(3,"ion-refresher-content",3),e.qZA(),e.YNc(4,T,29,8,"ion-card",4),e.TgZ(5,"ion-fab",5)(6,"ion-button",6),e.NdJ("click",function(){return i.gotoReminders()}),e._uU(7," Reminders "),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.events),e.xp6(2),e.Q6J("disabled",!1))},dependencies:[u.sg,u.O5,a.YG,a.PM,a.FN,a.Zi,a.Dq,a.W2,a.IJ,a.Q$,a.nJ,a.Wo],styles:["ion-fab-button[_ngcontent-%COMP%]{--background: #0687c8;--background-activated: #001b86;--background-hover: #4897af;--border-radius: 15px;--box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, .3), 0px 1px 3px 1px rgba(0, 0, 0, .15);--color: black;font-size:xx-small}"]}),n})();const R=[{path:"",component:v}];let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(R),g.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,b.u5,a.Pc,g.Bz.forChild([{path:"",component:v}]),A]}),n})()}}]);