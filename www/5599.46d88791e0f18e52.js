"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5599],{5599:(E,d,c)=>{c.r(d),c.d(d,{ProfilePageModule:()=>M});var g=c(6814),u=c(95),r=c(7311),f=c(2129),p=c(5861),e=c(6689),v=c(6882),_=c(2014),h=c(9862);function b(o,s){if(1&o&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.qZA()()()),2&o){const i=e.oxw();e.xp6(3),e.Oqu(i.verifiedUserDetails.name)}}function Z(o,s){if(1&o&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.qZA()()()),2&o){const i=e.oxw();e.xp6(3),e.Oqu(i.verifiedUserDetails.email)}}function y(o,s){if(1&o&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label"),e._uU(3),e.qZA()()()),2&o){const i=e.oxw();e.xp6(3),e.Oqu(i.verifiedUserDetails.mobile_number)}}function P(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"ion-button",11),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.setOpen(!0))}),e._uU(1," Verify Member "),e.qZA()}}function T(o,s){1&o&&(e.TgZ(0,"ion-button",12),e._uU(1," Pending "),e.qZA()),2&o&&e.Q6J("disabled",!0)}function x(o,s){1&o&&(e.TgZ(0,"ion-button",12),e._uU(1," Member "),e.qZA()),2&o&&e.Q6J("disabled",!0)}function U(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"ion-button",13),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.setOpen2(!0))}),e._uU(1," Edit Profile "),e.qZA()}}function D(o,s){1&o&&(e.TgZ(0,"ion-label",29),e._uU(1," Email is required. "),e.qZA())}function A(o,s){1&o&&(e.TgZ(0,"ion-label",29),e._uU(1," Invalid email address. "),e.qZA())}function q(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.setOpen(!1))}),e._uU(4,"Back"),e.qZA()()()(),e.TgZ(5,"ion-content",3)(6,"ion-card",14)(7,"ion-card-content")(8,"h1"),e._uU(9,"Member Details"),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"form",15),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.next())}),e.TgZ(12,"ion-label",16),e._uU(13,"Name"),e.TgZ(14,"span",17),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"ion-item",18),e._UZ(17,"ion-input",19),e.qZA(),e.TgZ(18,"ion-label",20),e._uU(19,"Official Email"),e.TgZ(20,"span",17),e._uU(21,"*"),e.qZA()(),e.TgZ(22,"ion-item",18),e._UZ(23,"ion-input",21),e.qZA(),e.TgZ(24,"div",22),e.YNc(25,D,2,0,"ion-label",23),e.YNc(26,A,2,0,"ion-label",23),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"ion-label",24),e._uU(29,"Mobile Number"),e.TgZ(30,"span",17),e._uU(31,"*"),e.qZA()(),e.TgZ(32,"ion-item",18),e._UZ(33,"ion-input",25),e.qZA(),e.TgZ(34,"ion-label",26),e._uU(35,"Company"),e.TgZ(36,"span",17),e._uU(37,"*"),e.qZA()(),e.TgZ(38,"ion-item",18),e._UZ(39,"ion-input",27),e.qZA(),e.TgZ(40,"ion-button",28),e._uU(41,"Next"),e.qZA()()()()()}if(2&o){const i=e.oxw();e.xp6(11),e.Q6J("formGroup",i.verificationDetails),e.xp6(14),e.Q6J("ngIf",i.verificationDetails.get("email").hasError("required")&&i.verificationDetails.get("email").touched),e.xp6(1),e.Q6J("ngIf",i.verificationDetails.get("email").hasError("email")&&i.verificationDetails.get("email").touched),e.xp6(14),e.Q6J("disabled",!i.verificationDetails.valid)}}function k(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.setOpen2(!1))}),e._uU(4,"Back"),e.qZA()()()(),e.TgZ(5,"ion-content",3)(6,"ion-card",14)(7,"ion-card-content")(8,"h1"),e._uU(9,"Edit Member Details"),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"form",15),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.updateOnSubmit())}),e.TgZ(12,"ion-label"),e._uU(13,"Name : "),e.qZA(),e.TgZ(14,"ion-item",18),e._UZ(15,"ion-input",30),e.qZA(),e.TgZ(16,"ion-label"),e._uU(17,"Email : "),e.qZA(),e.TgZ(18,"ion-item",18),e._UZ(19,"ion-input",31),e.qZA(),e.TgZ(20,"ion-label"),e._uU(21,"Phone No : "),e.qZA(),e.TgZ(22,"ion-item",32),e._UZ(23,"ion-input",33),e.qZA(),e.TgZ(24,"ion-label"),e._uU(25,"Company Name : "),e.qZA(),e.TgZ(26,"ion-item",18),e._UZ(27,"ion-input",34),e.qZA(),e.TgZ(28,"ion-button",35),e._uU(29,"Confirm"),e.qZA()()()()()}if(2&o){const i=e.oxw();e.xp6(11),e.Q6J("formGroup",i.verificationDetails2),e.xp6(17),e.Q6J("disabled",!i.verificationDetails2.valid)}}const O=[{path:"",component:(()=>{class o{constructor(i,t,a,n,l,m,C){this.alertController=i,this.fb=t,this.router=a,this.loadingController=n,this.auth=l,this.storage=m,this.http=C,this.userDetails=[],this.isModalOpen=!1,this.isModalOpen2=!1,this.verifiedUserDetails=[]}ngOnInit(){var i=this;return(0,p.Z)(function*(){if(i.useremail=yield i.storage.get("email"),i.google_email=yield i.storage.get("google_email"),i.apple_email=yield i.storage.get("apple_email"),i.user_id=yield i.storage.get("userid"),i.appleid=yield i.storage.get("appleid"),i.gmailid=yield i.storage.get("gmailid"),i.verId=yield i.storage.get("verId"),i.getUserdetails(),i.userVerification(),i.getVerifiedUser(),i.verificationDetails=i.fb.group({email:["",[u.kI.required,u.kI.email]],name:["",[u.kI.required]],tele:["",[u.kI.required,u.kI.maxLength(10),u.kI.minLength(10),u.kI.pattern("[0-9 ]{9}")]],company:["",[u.kI.required]]}),i.appleid)i.http.get(`https://casa.evokemusic.net/api/v1/profile/${i.appleid}`).subscribe(l=>{i.profile=l,console.log("edit profile GET request status",i.profile),i.verificationDetails2=i.fb.group({email2:{value:l.email,disabled:!0},name2:{value:l.name,disabled:!0},tele2:{value:l.telephone,disabled:!1},company2:{value:l.company,disabled:!0}})},l=>{console.log("Error",l)});else if(i.gmailid)i.http.get(`https://casa.evokemusic.net/api/v1/profile/${i.gmailid}`).subscribe(l=>{i.profile=l,console.log("edit profile GET request status",i.profile),i.verificationDetails2=i.fb.group({email2:{value:l.email,disabled:!0},name2:{value:l.name,disabled:!0},tele2:{value:l.telephone,disabled:!1},company2:{value:l.company,disabled:!0}})},l=>{console.log("Error",l)});else{var t;const n=`https://casa.evokemusic.net/api/v1/profile/${null===(t=i.auth.currentUser)||void 0===t?void 0:t.uid}`;i.http.get(n).subscribe(l=>{i.profile=l,console.log("edit profile GET request status",i.profile),i.verificationDetails2=i.fb.group({email2:{value:l.email,disabled:!0},name2:{value:l.name,disabled:!0},tele2:{value:l.telephone,disabled:!1},company2:{value:l.company,disabled:!0}})},l=>{console.log("Error",l)})}})()}get email(){var i;return null===(i=this.verificationDetails)||void 0===i?void 0:i.get("email")}get name(){var i;return null===(i=this.verificationDetails)||void 0===i?void 0:i.get("name")}get tele(){var i;return null===(i=this.verificationDetails)||void 0===i?void 0:i.get("tele")}get tele2(){var i;return null===(i=this.verificationDetails2)||void 0===i?void 0:i.get("tele2")}get company(){var i;return null===(i=this.verificationDetails)||void 0===i?void 0:i.get("company")}showAlert(i,t){var a=this;return(0,p.Z)(function*(){yield(yield a.alertController.create({header:i,message:t,buttons:["Okay"]})).present()})()}getUserdetails(){var i,t;this.useremail?(this.userid=null===(i=this.auth.currentUser)||void 0===i?void 0:i.uid,this.useremail=null===(t=this.auth.currentUser)||void 0===t?void 0:t.email,this.userDetails=this.auth.currentUser):console.log("Google email rec")}back(){var i=this;return(0,p.Z)(function*(){const t=yield i.loadingController.create();yield t.present(),i.router.navigateByUrl("menu/home"),yield t.dismiss()})()}setOpen(i){this.isModalOpen=i}setOpen2(i){this.isModalOpen2=i}next(){var i=this;return(0,p.Z)(function*(){i.isModalOpen=!1;const t=yield i.loadingController.create();var a,n;if(yield t.present(),i.useremail)console.log("CASA Email"),console.log("uid :",null===(a=i.auth.currentUser)||void 0===a?void 0:a.uid),i.http.post("https://casa.evokemusic.net/api/casa_member_req",{uuid:null===(n=i.auth.currentUser)||void 0===n?void 0:n.uid,name:i.verificationDetails.value.name,email:i.verificationDetails.value.email,company:i.verificationDetails.value.company,telephone:i.verificationDetails.value.tele}).subscribe(function(){var l=(0,p.Z)(function*(m){console.log("Response :",m),i.showAlert("","OTP has sent to the given email!"),i.router.navigateByUrl("otp-pg"),yield t.dismiss()});return function(m){return l.apply(this,arguments)}}());else if(i.google_email)try{console.log("Google Email"),console.log("uid :",i.gmailid),i.http.post("https://casa.evokemusic.net/api/casa_member_req",{uuid:i.gmailid,name:i.verificationDetails.value.name,email:i.verificationDetails.value.email,company:i.verificationDetails.value.company,telephone:i.verificationDetails.value.tele}).subscribe(function(){var l=(0,p.Z)(function*(m){console.log("Response :",m),i.showAlert("","OTP has sent to the given email!"),i.router.navigateByUrl("otp-pg"),yield t.dismiss()});return function(m){return l.apply(this,arguments)}}())}catch(l){console.log(l)}else i.http.post("https://casa.evokemusic.net/api/casa_member_req",{uuid:i.appleid,name:i.verificationDetails.value.name,email:i.verificationDetails.value.email,company:i.verificationDetails.value.company,telephone:i.verificationDetails.value.tele}).subscribe(function(){var l=(0,p.Z)(function*(m){console.log("Response :",m),i.showAlert("","OTP has sent to the given email!"),i.router.navigateByUrl("otp-pg"),yield t.dismiss()});return function(m){return l.apply(this,arguments)}}()),yield t.dismiss()})()}userVerification(){var i;this.useremail?this.http.post("https://casa.evokemusic.net/api/v1/verification",{user_id:null===(i=this.auth.currentUser)||void 0===i?void 0:i.uid}).subscribe(t=>{console.log("status :",t),this.verificationStatus=t}):this.gmailid?this.http.post("https://casa.evokemusic.net/api/v1/verification",{user_id:this.gmailid}).subscribe(t=>{console.log("status :",t),this.verificationStatus=t}):this.http.post("https://casa.evokemusic.net/api/v1/verification",{user_id:this.appleid}).subscribe(t=>{console.log("status :",t),this.verificationStatus=t})}getVerifiedUser(){const i="https://casa.evokemusic.net/api/v1/profile/";if(this.useremail){var t;const a=`${i}${null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid}`;this.http.get(a).subscribe(n=>{this.verifiedUserDetails=n},n=>{console.log("Error",n)})}else this.gmailid?this.http.get(`${i}${this.gmailid}`).subscribe(n=>{this.verifiedUserDetails=n},n=>{console.log("Error",n)}):this.http.get(`${i}${this.appleid}`).subscribe(n=>{this.verifiedUserDetails=n,console.log("Verified Users",this.verifiedUserDetails)},n=>{console.log("Error",n)})}updateOnSubmit(){if(this.verificationDetails.valid)if(this.gmailid)this.http.post("https://casa.evokemusic.net/api/v1/edit_profile",{user_id:this.gmailid,mobile_number:this.verificationDetails2.value.tele2}).subscribe(t=>{this.setOpen2(!1),this.router.navigateByUrl("menu/home"),this.showAlert("","Member Edited Successfull"),console.log("company name",this.verificationDetails2.value.company2),console.log("Edit profile Status :",t)});else if(this.appleid)this.http.post("https://casa.evokemusic.net/api/v1/edit_profile",{user_id:this.appleid,mobile_number:this.verificationDetails2.value.tele2}).subscribe(t=>{this.setOpen2(!1),this.router.navigateByUrl("menu/home"),this.showAlert("","Member Edited Successfull"),console.log("Edit profile Status :",t)});else{var i;this.http.post("https://casa.evokemusic.net/api/v1/edit_profile",{user_id:null===(i=this.auth.currentUser)||void 0===i?void 0:i.uid,mobile_number:this.verificationDetails2.value.tele2}).subscribe(t=>{this.setOpen2(!1),this.router.navigateByUrl("menu/home"),this.showAlert("","Member Edited Successfull"),console.log("Edit profile Status :",t)})}}asteriskValidator(){return i=>/\*$/.test(i.value)?null:{invalidAsterisk:!0}}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(r.Br),e.Y36(u.qu),e.Y36(f.F0),e.Y36(r.HT),e.Y36(v.gx),e.Y36(_.K),e.Y36(h.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],decls:26,vars:10,consts:[["translcant","true"],["slot","start"],[3,"click"],[1,"ion-padding"],[2,"margin-bottom","10px"],["src","../../assets/icon/6915987.png",2,"margin-top","20%","width","50px","float","left"],[4,"ngIf"],["size","small","style","float: left; margin-left: 10px; margin-bottom: 10px;",3,"click",4,"ngIf"],["fill","outline","size","small","style","float: left; margin-left: 10px; margin-bottom: 10px;",3,"disabled",4,"ngIf"],["size","small","style","float: right; margin-right: 10px; margin-bottom: 10px;",3,"click",4,"ngIf"],[3,"isOpen"],["size","small",2,"float","left","margin-left","10px","margin-bottom","10px",3,"click"],["fill","outline","size","small",2,"float","left","margin-left","10px","margin-bottom","10px",3,"disabled"],["size","small",2,"float","right","margin-right","10px","margin-bottom","10px",3,"click"],[2,"position","static"],[3,"formGroup","ngSubmit"],["for","name"],[1,"required"],["fill","outline",1,"ion-margin-bottom",2,"border-radius","10px"],["type","name","placeholder","","formControlName","name"],["for","email"],["type","email","placeholder","","formControlName","email"],[2,"margin-top","-20px"],["class","emailValidation",4,"ngIf"],["for","tele"],["type","number","placeholder","","formControlName","tele"],["for","company"],["type","company","placeholder","","formControlName","company"],["type","submit","size","small",3,"disabled"],[1,"emailValidation"],["type","name","placeholder","Name","formControlName","name2"],["type","email","placeholder","Official Email","formControlName","email2"],["fill","outline",1,"ion-margin-bottom",2,"border-radius","10px","margin-top","10px"],["type","number","placeholder","07XXXXXXXX","formControlName","tele2"],["type","company","placeholder","Company","formControlName","company2"],["type","submit","size","small",2,"margin-top","20px",3,"disabled"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return t.back()}),e._uU(4,"Back"),e.qZA()()()(),e.TgZ(5,"ion-content",3)(6,"ion-card")(7,"ion-grid")(8,"ion-row",4)(9,"ion-col"),e._UZ(10,"img",5),e.qZA()(),e.YNc(11,b,4,1,"ion-row",6),e.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-label"),e._uU(15),e.qZA()()(),e.YNc(16,Z,4,1,"ion-row",6),e.YNc(17,y,4,1,"ion-row",6),e.qZA(),e.YNc(18,P,2,0,"ion-button",7),e.YNc(19,T,2,1,"ion-button",8),e.YNc(20,x,2,1,"ion-button",8),e.YNc(21,U,2,0,"ion-button",9),e.TgZ(22,"ion-modal",10),e.YNc(23,q,42,4,"ng-template"),e.qZA(),e.TgZ(24,"ion-modal",10),e.YNc(25,k,30,2,"ng-template"),e.qZA()()()),2&i&&(e.xp6(11),e.Q6J("ngIf",t.verifiedUserDetails.name),e.xp6(4),e.Oqu(t.verifiedUserDetails.company_name),e.xp6(1),e.Q6J("ngIf",t.verifiedUserDetails.email),e.xp6(1),e.Q6J("ngIf",t.verifiedUserDetails.mobile_number),e.xp6(1),e.Q6J("ngIf","guest"==t.verificationStatus),e.xp6(1),e.Q6J("ngIf","pending"==t.verificationStatus),e.xp6(1),e.Q6J("ngIf","casa_member"==t.verificationStatus),e.xp6(1),e.Q6J("ngIf",0!=t.verId&&"casa_member"==t.verificationStatus),e.xp6(1),e.Q6J("isOpen",t.isModalOpen),e.xp6(2),e.Q6J("isOpen",t.isModalOpen2))},dependencies:[g.O5,u._Y,u.JJ,u.JL,r.YG,r.Sm,r.PM,r.FN,r.wI,r.W2,r.jY,r.Gu,r.pK,r.Ie,r.Q$,r.Nd,r.sr,r.ki,r.as,r.j9,u.sg,u.u],styles:[".required[_ngcontent-%COMP%]{color:red;font-size:1.2em;margin-left:4px}.emailValidation[_ngcontent-%COMP%]{color:red;font-size:x-small}"]}),o})()}];let N=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(O),f.Bz]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,u.u5,r.Pc,N,u.UX]}),o})()}}]);