"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8965],{8965:(O,p,s)=>{s.r(p),s.d(p,{NetworkPageModule:()=>Y});var u=s(6814),v=s(95),g=s(2129),c=s(7311),d=s(5861),m=s(7398),h=s(4664),f=s(2096),t=s(6689),x=s(7613),U=s(6882),N=s(9862),Z=s(2014),y=s(1786),w=s(1930);function T(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",15),t.NdJ("click",function(){const l=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.connectUser(l))}),t.TgZ(1,"ion-avatar",16),t._UZ(2,"img",17),t.qZA(),t.TgZ(3,"ion-text",18),t._uU(4),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Q6J("src",null==e?null:e.photo,t.LSH),t.xp6(2),t.Oqu(null==e?null:e.name)}}function k(n,i){if(1&n&&(t.TgZ(0,"ion-content")(1,"ion-list",13),t.YNc(2,T,5,2,"ion-item",14),t.qZA()()),2&n){const e=i.ngIf;t.xp6(2),t.Q6J("ngForOf",e)}}function C(n,i){if(1&n&&(t.TgZ(0,"ion-content",10)(1,"ion-header",11),t._uU(2,"Networks"),t.qZA(),t.YNc(3,k,3,1,"ion-content",12),t.ALo(4,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,e.users))}}function F(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",21),t.NdJ("click",function(){const l=t.CHM(e).ngIf,a=t.oxw(4);return t.KtG(a.connectedUser(l))}),t.TgZ(2,"ion-avatar",16),t._UZ(3,"img",17),t.qZA(),t.TgZ(4,"ion-text",18),t._uU(5),t.qZA()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw(4);let r,l;t.xp6(3),t.Q6J("src",null==(r=o.getUser(e))?null:r.photo,t.LSH),t.xp6(2),t.Oqu(null==(l=o.getUser(e))?null:l.name)}}function P(n,i){if(1&n&&(t.TgZ(0,"ion-item",20),t.YNc(1,F,6,2,"ng-container",12),t.ALo(2,"async"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,null==e?null:e.user))}}function Q(n,i){if(1&n&&(t.TgZ(0,"ion-list")(1,"ion-header",11),t._uU(2,"My Connections"),t.qZA(),t._UZ(3,"br"),t.YNc(4,P,3,3,"ion-item",19),t.qZA()),2&n){const e=i.ngIf;t.xp6(4),t.Q6J("ngForOf",e)}}function A(n,i){if(1&n&&(t.TgZ(0,"ion-content",10),t.YNc(1,Q,5,1,"ion-list",12),t.ALo(2,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.connections))}}let _=(()=>{class n{constructor(e,o,r,l,a,G,M,S,b){this.api=e,this.auth=o,this.http=r,this.storage=l,this.route=a,this.router=G,this.chatService=M,this.loadingController=S,this.connectionService=b,this.value="N",this.user=null,this.connectedUsers=[]}ngOnInit(){var e=this;return(0,d.Z)(function*(){const o=yield e.loadingController.create();yield o.present(),e.gmailid=yield e.storage.get("gmailid"),e.appleid=yield e.storage.get("appleid"),console.log("gmailid :",e.gmailid),e.gmailid?(e.getUserForGoogle(),e.getConnectedUsersForGoogle()):e.appleid?(e.getUserForIos(),e.getConnectedUsersForIos()):(e.getUsers(),e.getConnectedUsers()),yield o.dismiss()})()}type(e){this.value=e}getUsers(){this.chatService.getUsers(),this.users=this.chatService.users,console.log("Network->getUsers->users :",this.users)}getUserForGoogle(){this.users=this.api.collectionDataQuery("users",this.api.whereQuery("uid","!=",this.gmailid)),console.log("getUserForGoogle :",this.users)}getUserForIos(){this.users=this.api.collectionDataQuery("users",this.api.whereQuery("uid","!=",this.appleid)),console.log("getUserForGoogle :",this.users)}getUser(e){return e}connectUser(e){var o=this;return(0,d.Z)(function*(){const r={state:{id:e.id,name:null==e?void 0:e.name,email:null==e?void 0:e.email,status:0}};o.router.navigate(["/connect"],r),console.log("navData :",r)})()}connectedUser(e){var o=this;return(0,d.Z)(function*(){o.router.navigate(["/connect"],{state:{id:e.id,name:null==e?void 0:e.name,email:null==e?void 0:e.email,status:1}})})()}getConnectedUsers(){this.connectionService.getConnections(),this.connections=this.connectionService.connections,console.log("getConnectedUsers :",this.connections)}getConnectedUsersForGoogle(){this.connections=this.api.collectionDataQuery("connectedUsers",this.api.whereQuery("members","array-contains",this.gmailid)).pipe((0,m.U)(e=>(e.map(o=>{const r=o.members.filter(a=>a!=this.gmailid),l=this.api.docDataQuery(`users/${r[0]}`,!0);o.user=l}),console.log("getConnectedUsersForGoogle :",e),e)),(0,h.w)(e=>(0,f.of)(e)))}getConnectedUsersForIos(){this.connections=this.api.collectionDataQuery("connectedUsers",this.api.whereQuery("members","array-contains",this.appleid)).pipe((0,m.U)(e=>(e.map(o=>{const r=o.members.filter(a=>a!=this.appleid),l=this.api.docDataQuery(`users/${r[0]}`,!0);o.user=l}),console.log("getConnectedUsersForGoogle :",e),e)),(0,h.w)(e=>(0,f.of)(e)))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.s),t.Y36(U.gx),t.Y36(N.eN),t.Y36(Z.K),t.Y36(g.gz),t.Y36(g.F0),t.Y36(y.a),t.Y36(c.HT),t.Y36(w.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-network"]],decls:15,vars:3,consts:[["id","main-content",1,"ion-page"],[1,"ion-padding"],["slot","fixed"],["slot","start",2,"margin-left","25%"],[2,"overflow-x","scroll"],["size","x-small","className","ion-nowrap",3,"scrollable"],["value","N",2,"font-size","x-small",3,"click"],["value","C",2,"font-size","x-small",3,"click"],["slot","end",2,"margin-right","25%"],["style","margin-top: 10px;",4,"ngIf"],[2,"margin-top","10px"],[2,"font-size","x-large","margin-left","20px","margin-top","20px"],[4,"ngIf"],["line","none",1,"ion-margin-top"],["lines","full","detail","true","style","width: 90%; margin:auto; border-radius: 5px; padding-bottom: 1vh; margin-top: 10px;",3,"click",4,"ngFor","ngForOf"],["lines","full","detail","true",2,"width","90%","margin","auto","border-radius","5px","padding-bottom","1vh","margin-top","10px",3,"click"],["slot","start"],[3,"src"],["slot","start","color","medium"],["lines","full","detail","true","style","width: 90%; margin:auto; border-radius: 5px; padding-bottom: 1vh; margin-top: 10px;",4,"ngFor","ngForOf"],["lines","full","detail","true",2,"width","90%","margin","auto","border-radius","5px","padding-bottom","1vh","margin-top","10px"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"ion-content",1),t._UZ(2,"br")(3,"br"),t.TgZ(4,"ion-toolbar",2),t._UZ(5,"ion-buttons",3),t.TgZ(6,"div",4)(7,"ion-segment",5)(8,"ion-segment-button",6),t.NdJ("click",function(){return o.type("N")}),t._uU(9," Network "),t.qZA(),t.TgZ(10,"ion-segment-button",7),t.NdJ("click",function(){return o.type("C")}),t._uU(11," My Connections "),t.qZA()()(),t._UZ(12,"ion-buttons",8),t.qZA(),t.YNc(13,C,5,3,"ion-content",9),t.YNc(14,A,3,3,"ion-content",9),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("scrollable",!0),t.xp6(6),t.Q6J("ngIf","N"==o.value),t.xp6(1),t.Q6J("ngIf","C"==o.value))},dependencies:[u.sg,u.O5,c.BJ,c.Sm,c.W2,c.Gu,c.Ie,c.q_,c.cJ,c.GO,c.yW,c.sr,c.QI,u.Ov]}),n})();const J=[{path:"",component:_}];let I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(J),g.Bz]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,v.u5,c.Pc,g.Bz.forChild([{path:"",component:_}]),I]}),n})()}}]);